X sposta la correzione della prospettiva (bird-view) nel warp (era in main)
X prendi risoluzione monitor in automatico
X aggiungi opzione di ridefinire i bordi

X prendi primo frame del video e chiama warp
X elabora frame rimanenti con overlay

X controlla cosa succede se fai il warp sull'originale oppure sull'immagine con bordi (in termini di correttezza della prospettiva)
X aggiungi controlli sull'input dei bordi
X aggiungi controlli sulle dimensioni della barra di stato
    X aggiungi posizione testo per tutti i casi
    X ridimensiona frame (aggiungendo padding/bordo) se il video è troppo piccolo [uno dei formati più piccoli è 256x133, dovrebbe già andare tutto bene così com'è (senza controlli)]

X gestisci ratio del pavimento nei punti
X rifai ridimensionamento overlay (funziona male)
    X mettici un overlay width massimo (così non scazza nemmeno il testo)

X implementa segnaposti per la persone
    X separa warp dell'immagine dal semplice warp dei punti
    X punti multicolore [...]
    X aggiusta punti su overlay ridimensionato rispetto alla risoluzione dello schermo
    X aggiusta coordinate punti in base alla posizione dell'overlay
    X togli parametri di omografia non necessari in overlay.py
    X se proprio va rifatto il warp della mappa ad ogni frame, ricalcola anche l'immagine della minimappa riprendendola dal frame (con le coordinate iniziali)
        X non ho dovuto rifare il warp tutte le volte (yay!)

X controlla il punto effettivo di start point, end point e corners in overlay (mi sa che qualcuno NON considera i bordi che sono stati aggiunti nel frattempo)


X sposta parametri della status bar (colori, posizioni del testo) nel file ini


X dividi warp e generazione minimappa (?)
- disaccoppia funzioni (in generale)
- unisci/sistema (rinomina) script contenenti funzioni correlate

X aggiungi opzione di specificare manualmente minimappa (per misurazioni precise)

X unifica nomi variabili (im vs. img, ecc.) -> img_src, img_dst

X aggiungi barra con testo per warning
X metti bordo alla barra + minimappa (a seconda del video si distingue male)

X controlla errore nel dimensionamento dell'overlay quando chiamato dal main
    X dividi generazione minimappa dalla sua applicazione sull'immagine in overlay (generate_overlay/apply_overlay)

X migliora scritte in output (giusto per bellezza)
    X elimina domanda iniziale di border (parti subito col primo frame)







Sviluppi futuri/note aggiuntive

X per aumentare l'efficienza overlay dovrebbe generare un'immagine e salvarla una volta calcolate le dimensioni (quindi generarla una sola volta invece che ogni volta che viene chiamato), e aggiungerla di volta in volta (con una versione differente) solo coi punti dei piedi
X la tolleranza nel calcolo delle dimensioni della finestra in warp (rispetto allo schermo) funziona perfettamente (yay!)
X futuri sviluppi potrebbero testare la funzione screeninfo su monitor multipli (per capire quale monitor scegliere) -> va bene DISPLAY1, vanno come DISPLAY1, DISPLAY2, ecc.

. aggiungi opzioni di visualizzare o meno l'overlay (con varie combinazioni, tipo solo mappa/testo, ecc.) (da specificare nell'ini)
. modifica offset testo in modo che sia centrato

X salva minimappa sul disco; verifica presenza minimappa all'avvio (per evitare di ricalcolarla in caso di malfunzionamento)  [non ha molto senso in realtà, è più semplice e sicuro ricalcolarla]
    X vanno salvati anche i punti sorgente del warp, è (relativamente) complicato
X sposta tutti i parametri rilevanti in un file ini (per comodità)
    X cambia ordine parametri nelle funzioni process_frame_first, process_frame







pts_src = 30 365
          232 369
          232 473
          20 479
